# 正泰单相导轨表连接示例

正泰单相导轨表（也被称为 DIN 导轨电表）是一种安装在 DIN 导轨上的电力计量设备，主要用于测量和记录单相电路的电力消耗，常用于家庭、商业和工业场所，以监测用电情况并计量电能消耗。正泰单相导轨表可以通过连接到电路中的传感器等设备来获取电流数据和其他相关信息。

[RS485](#rs485) 是一种广泛用于数据传输和通信系统中的串行通信协议，可实现多个设备之间的远程通信。在电力行业中，RS485 常用于数据采集和监测系统，可用于将正泰单相导轨表的数据传输到其他设备或系统中。

本篇将介绍如何利用[转换器](#转换器)将正泰单相导轨表的数据转换为 RS485 通信协议可以接受和处理的格式，以实现数据的传输和通信，随即再通过 Neuron DLT645-2007 实现数据的收集和转发。

连接示意图如下：

![connect](./assets/connect.png)

### 设备型号

正泰单相导轨表（DDSU666），220V 5(60)A。

## 安装驱动

大多数 USB 转 RS485 转换器的驱动程序可以从设备制造商的官方网站上下载。驱动程序通常提供了与操作系统兼容的接口，以使计算机可以与转换器通信。

在 Windows 系统中，插入 USB 转 RS485 转换器时，系统通常会自动识别并安装驱动程序。如果系统无法自动识别设备，则可以手动安装驱动程序。安装过程中需要按照驱动程序安装向导的指示进行操作。

在 Linux 和 MacOS 等操作系统中，可能需要手动安装驱动程序。一些转换器制造商提供了针对这些操作系统的驱动程序和指南。

需要注意的是，如果使用的是较老的 USB 转 RS485 转换器，可能需要安装较老版本的驱动程序或使用特定的软件。建议在使用转换器前查阅设备制造商的文档以获取最新的驱动程序和操作说明。

## 查看端口

在 Windows 操作系统中，可以使用设备管理器来查看计算机的串口（COM 端口）和并口（LPT 端口）。

以下是查看串口的方法：

1. 打开**设备管理器**：可以通过**控制面板**中的**设备管理器**打开，也可以在 Windows 搜索栏中输入**设备管理器**打开。
2. 展开**端口（COM 和 LPT）**：在设备管理器中找到**端口（COM 和 LPT）**选项，展开后可以查看计算机中可用的串口列表。
3. 查看串口属性：右键单击串口，选择**属性**选项，可以查看串口的详细信息，包括串口的名称、状态、波特率等。

如果需要进一步测试串口是否工作正常，可以使用串口调试工具，例如 RealTerm 或 TeraTerm 等软件来进行测试。

需要注意的是，在 Linux 和 MacOS 等操作系统中，查看和管理串口的方法可能略有不同。可以通过操作系统的终端或相关工具来查看和管理串口。

## 添加插件

在 **配置 -> 南向设备**，点击**添加设备**来创建设备节点，输入插件名称，插件类型选择 **DLT645-2007** 启用插件。

## 设备配置

点击插件卡片或插件列，进入**设备配置**页。配置 Neuron 与设备建立连接所需的参数：

- 物理链路：Serial

* 串口设备：210220003011
* 停止位：1
* 校验位：Even（偶校验）
* 波特率：9600
* 数据位：8

## 设置组和点位

1. 进入 DL/T645-2007 设备卡片中，创建组；

2. 在组中创建点位，点位示例如下表所示：

   | 名称              | 属性 | 类型   | 地址                     | 乘系数 |
   | ----------------- | ---- | ------ | ------------------------ | ------ |
   | A 相电压          | 读   | UINT16 | 210220003011#02-01-01-00 | 0.1    |
   | A 相电流          | 读   | UINT32 | 210220003011#02-02-01-00 | 0.001  |
   | 瞬时 A 相有功功率 | 读   | UINT32 | 210220003011#02-03-01-00 | 0.0001 |

## 拓展阅读

### RS485

RS485 是一种用于串行通信传输数据的标准，可以在远距离范围内传输数据。它是 RS-232 标准的改进版，具有更快的速度、更远的传输距离和更强的抗干扰能力。

RS485 采用差分信号传输方式，意味着它使用两根线来传输数据，一根传送正信号，另一根传送负信号。这种方式可以抵消噪声，并使其不易受到干扰。

RS485 可以在单个总线上支持最多 32 个设备，速度为 100 kbps时，传输距离可达 1,200 米。在较低速度下，距离可增加到 4,000 米。

RS485 常用于工业自动化、过程控制和建筑自动化系统中。它还用于需要多个设备在远距离范围内通信的应用程序，例如安全系统和远程监控系统。

RS-485 接口通常采用两根信号线进行数据传输，即 A 线和 B 线。数据通过对 A 线和 B 线之间的电压差进行编码和解码，以实现数据的传输和接收。它还支持半双工通信模式，即同一时刻只能进行数据的发送或接收。 

### 转换器

USB 转 RS485 转换器是一种将 USB 接口转换为 RS485 接口的设备。它可以将从计算机发送的数据转换为 RS485 信号，并通过 RS485 总线传输数据到其他设备。

USB 转 RS485 转换器通常由 USB 接口、RS485 接口和芯片组成。芯片负责将 USB 数据转换为 RS485 信号，并管理数据传输的速率和流控制等功能。

使用 USB 转 RS485 转换器可以方便地将计算机与使用 RS485 接口的设备连接起来，实现数据的传输和通信。它广泛用于自动化控制、仪器仪表、工业通信和智能家居等领域。

## 安装驱动

大多数 USB 转 RS485 转换器的驱动程序可以从设备制造商的官方网站上下载。驱动程序通常提供了与操作系统兼容的接口，以使计算机可以与转换器通信。

在 Windows 系统中，插入 USB 转 RS485 转换器时，系统通常会自动识别并安装驱动程序。如果系统无法自动识别设备，则可以手动安装驱动程序。安装过程中需要按照驱动程序安装向导的指示进行操作。

在 Linux 和 MacOS 等操作系统中，可能需要手动安装驱动程序。一些转换器制造商提供了针对这些操作系统的驱动程序和指南。

需要注意的是，如果使用的是较老的 USB 转 RS485 转换器，可能需要安装较老版本的驱动程序或使用特定的软件。建议在使用转换器前查阅设备制造商的文档以获取最新的驱动程序和操作说明。



## 创建节点和点位

在 Neuron UI 界面中，完成以下操作：

1. 南向设备中添加 DL/T645-2007 设备，并完成设备配置；
2. 

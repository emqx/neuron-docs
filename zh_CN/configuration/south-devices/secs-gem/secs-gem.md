# 概览

SECS GEM HSMS 驱动通过 TCP/IP 协议访问支持 SEMI E37 HSMS 标准的设备，目前支持设备 PASSIVE 模式，驱动作为 Host 主动连接。

## 设备设置

| 字段     | 说明                       |
| -------- | -------------------------- |
| host     | 设备 IP 地址               |
| port     | 设备端口号, 默认5000       |
| deviceid | 设备 ID, 默认0             |
| timeout  | 连接超时时间，默认3000毫秒 |

## 支持的数据类型

* uint8
* int8
* uint16
* int16
* uint32
* int32
* uint64
* int64
* float
* double
* bool
* string

## Streams 和 Functions

SECS-II 消息称为流和功能。每条消息都有一个流值（ Sx ）和一个功能值（ Fy ）。对于流1功能1，它写为 S1F1，读为 “S1F1” 。流是消息的类别，而功能是类别中的特定消息。主消息中的功能值始终是奇数，关联的二次答复中的功能值始终比主消息中的功能值大1或偶数。

| Stream | 说明                 |
| ------ | -------------------- |
| 1      | 设备状态             |
| 2      | 设备控制             |
| 3      | 材料状态             |
| 4      | 材料控制             |
| 5      | 报警处理             |
| 6      | 数据收集             |
| 7      | 配方管理             |
| 8      | 控制程序传输         |
| 9      | 系统错误             |
| 10     | 终端服务             |
| 11     | 未启用               |
| 12     | 晶片图形布置         |
| 13     | 未格式化的数据集传输 |


**常用 SxFy**

| Stream Function | 说明                 |
| --------------- | -------------------- |
| S1F1            | Hello消息            |
| S1F2            | 在线数据             |
| S1F3            | 选定设备状态数据     |
| S1F4            | 格式化的设备状态数据 |
| S6F7            | 数据传输请求         |
| S6F8            | 数据传输数据         |
| S6F15           | 事件报告请求         |
| S6F16           | 事件报告数据         |


## 特殊类型处理

SECS-II 消息定义了 LIST 类型，插件也通过 string 支持该类型，但是有一个反序列化的过程，具体的规则如下所示。

| SECS-II 类型 | 序列化          | 说明                                                      |
| ------------ | --------------- | --------------------------------------------------------- |
| LIST         | `<L[n] xxx>(.)` | n 为 LIST 长度，空 LIST n 为 0， 最外层 LIST 最后包括 *.* |
| ASCII        | `<A[n] xxx> `   | n 为 ASCII 长度，空 ASCII n 为 0                          |
| Binary       | `<B[n] xxx> `   | n 为 BInary 长度，空 BInary n 为 0                        |
| Boolean      | `<Boolean x> `  |                                                           |
| UINT8        | `<U1 x> `       |
| UINT16       | `<U2 x> `       |
| UINT32       | `<U4 x> `       |
| UINT64       | `<U8 x> `       |                                                           |
| INT8         | `<I1 x> `       |
| INT16        | `<I2 x> `       |
| INT32        | `<I4 x> `       |
| INT64        | `<I8 x> `       |                                                           |
| 32FLOAT      | `<F4 x> `       |
| 64FLOAT      | `<F8 x> `       |                                                           |